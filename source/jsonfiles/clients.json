{
    "name": "clients",
    "documentationhide": false,
    "attrs": {
        "type": {
            "type": "id",
            "title": {
                "singular": "Type"
            },
            "filter": {
                "order": 4
            },
            "reference": {
                "type": "picklist",
                "filter": {
                    "function": "client_type",
                    "options": []
                }
            },
            "permissions": {
                "fields": true,
                "conditions": true,
                "sort": true,
                "documents": {
                    "insert": true,
                    "update": true,
                    "delete": true
                }
            },
            "default": {
                "fields": true
            },
            "documentation": {
                "description": "Type of client, if it is company or person",
                "color": "red",
                "hide": false
            }
        },
        "patient": {
            "type": "id",
            "reference": {
                "type": "referenceOne",
                "collection": "patients"
            },
            "permissions": {
                "fields": true,
                "conditions": true,
                "sort": true,
                "documents": {
                    "insert": true,
                    "update": true,
                    "delete": true
                }
            },
            "default": {
                "fields": true
            },
            "documentation": {
                "description": "",
                "color": "red",
                "hide": true
            }
        },
        "contact_type": {
            "type": "id",
            "title": {
                "singular": "Contact Type"
            },
            "filter": {
                "order": 3
            },
            "reference": {
                "type": "picklist",
                "filter": {
                    "function": "contact_type",
                    "options": []
                }
            },
            "permissions": {
                "fields": true,
                "conditions": true,
                "sort": true,
                "documents": {
                    "insert": true,
                    "update": true,
                    "delete": true
                }
            },
            "default": {
                "fields": true
            },
            "documentation": {
                "description": "Type of client, if it is company or person",
                "color": "red",
                "hide": false
            }
        },
        "ext_id": {
            "type": "string",
            "title": {
                "singular": "External ID"
            },
            "filter": {
                "order": 2
            },
            "permissions": {
                "fields": true,
                "conditions": true,
                "sort": true,
                "documents": {
                    "insert": true,
                    "update": true,
                    "delete": true
                }
            },
            "default": {
                "fields": true
            },
            "documentation": {
                "description": "Contains the external id",
                "color": "red",
                "hide": false
            }
        },
        "accounting_id": {
            "type": "string",
            "permissions": {
                "fields": true,
                "conditions": true,
                "documents": {
                    "insert": true,
                    "update": true,
                    "delete": true
                },
                "sort": true
            },
            "default": {
                "fields": true
            },
            "documentation": {
                "description": "Contains the accounting id",
                "color": "red",
                "hide": false
            }
        },
        "color": {
            "type": "string",
            "permissions": {
                "fields": true,
                "conditions": true,
                "documents": {
                    "insert": true,
                    "update": true,
                    "delete": true
                },
                "sort": true
            },
            "default": {
                "fields": true
            },
            "documentation": {
                "description": "Color of the tag",
                "color": "red",
                "hide": false
            }
        },
        "email": {
            "type": "string",
            "permissions": {
                "fields": true,
                "conditions": true,
                "sort": true,
                "documents": {
                    "insert": true,
                    "update": true,
                    "delete": true
                }
            },
            "default": {
                "fields": true
            },
            "documentation": {
                "description": "Contains the email of the client",
                "color": "red",
                "hide": false
            }
        },
        "locations": {
            "type": "subdocuments",
            "title": {
                "singular": "Address",
                "plural": "Addresses"
            },
            "filter": {
                "function": "location",
                "options": {
                    "type": "full"
                },
                "order": 6
            },
            "permissions": {
                "documents": {
                    "delete": true
                }
            },
            "events": {
                "insert": [
                    {
                        "function": "geolocate"
                    }
                ],
                "update": [
                    {
                        "function": "geolocate"
                    }
                ]
            },
            "subdocument": {
                "accounting_id": {
                    "type": "string",
                    "permissions": {
                        "fields": true,
                        "conditions": true,
                        "sort": true,
                        "documents": {
                            "insert": true,
                            "update": true,
                            "delete": true
                        }
                    },
                    "default": {
                        "fields": true
                    }
                },
                "primary": {
                    "type": "boolean",
                    "primary": true,
                    "permissions": {
                        "fields": true,
                        "conditions": true,
                        "sort": true,
                        "documents": {
                            "insert": true,
                            "update": true,
                            "delete": true
                        }
                    },
                    "default": {
                        "fields": true
                    }
                },
                "type": {
                    "type": "id",
                    "reference": {
                        "type": "picklist",
                        "filter": {
                            "function": "location_type",
                            "options": []
                        }
                    },
                    "permissions": {
                        "fields": true,
                        "conditions": true,
                        "sort": true,
                        "documents": {
                            "insert": true,
                            "update": true,
                            "delete": true
                        }
                    },
                    "default": {
                        "fields": true
                    }
                },
                "title": {
                    "type": "string",
                    "permissions": {
                        "fields": true,
                        "conditions": true,
                        "sort": true,
                        "documents": {
                            "insert": true,
                            "update": true,
                            "delete": true
                        }
                    },
                    "default": {
                        "fields": true
                    }
                },
                "address": {
                    "type": "subdocument",
                    "title": {
                        "singular": "Address",
                        "plural": "Addresses"
                    },
                    "filter": {
                        "order": 6
                    },
                    "permissions": {
                        "documents": {
                            "delete": true
                        }
                    },
                    "subdocument": {
                        "city": {
                            "type": "string",
                            "title": {
                                "singular": "City",
                                "plural": "Cities"
                            },
                            "filter": {
                                "order": 1
                            },
                            "permissions": {
                                "fields": true,
                                "conditions": true,
                                "sort": true,
                                "documents": {
                                    "insert": true,
                                    "update": true,
                                    "delete": true
                                }
                            },
                            "default": {
                                "fields": true
                            }
                        },
                        "country": {
                            "type": "id",
                            "reference": {
                                "type": "picklist",
                                "filter": {
                                    "function": "country",
                                    "options": []
                                }
                            },
                            "permissions": {
                                "fields": true,
                                "conditions": true,
                                "sort": true,
                                "documents": {
                                    "insert": true,
                                    "update": true,
                                    "delete": true
                                }
                            },
                            "default": {
                                "fields": true
                            }
                        },
                        "lat": {
                            "type": "float",
                            "permissions": {
                                "fields": true,
                                "conditions": true,
                                "sort": true,
                                "documents": {
                                    "insert": true,
                                    "update": true,
                                    "delete": true
                                }
                            },
                            "default": {
                                "fields": true
                            }
                        },
                        "lng": {
                            "type": "float",
                            "permissions": {
                                "fields": true,
                                "conditions": true,
                                "sort": true,
                                "documents": {
                                    "insert": true,
                                    "update": true,
                                    "delete": true
                                }
                            },
                            "default": {
                                "fields": true
                            }
                        },
                        "state": {
                            "type": "id",
                            "reference": {
                                "type": "picklist",
                                "filter": {
                                    "function": "state",
                                    "options": []
                                }
                            },
                            "permissions": {
                                "fields": true,
                                "conditions": true,
                                "sort": true,
                                "documents": {
                                    "insert": true,
                                    "update": true,
                                    "delete": true
                                }
                            }
                        },
                        "title": {
                            "type": "string",
                            "permissions": {
                                "fields": true,
                                "conditions": true,
                                "sort": true,
                                "documents": {
                                    "insert": true,
                                    "update": true,
                                    "delete": true
                                }
                            },
                            "default": {
                                "fields": true
                            }
                        },
                        "street": {
                            "type": "string",
                            "title": {
                                "singular": "Street",
                                "plural": "Streets"
                            },
                            "filter": {
                                "order": 0
                            },
                            "permissions": {
                                "fields": true,
                                "conditions": true,
                                "sort": true,
                                "documents": {
                                    "insert": true,
                                    "update": true,
                                    "delete": true
                                }
                            },
                            "default": {
                                "fields": true
                            }
                        },
                        "street_extra": {
                            "type": "string",
                            "permissions": {
                                "fields": true,
                                "conditions": true,
                                "sort": true,
                                "documents": {
                                    "insert": true,
                                    "update": true,
                                    "delete": true
                                }
                            },
                            "default": {
                                "fields": true
                            }
                        },
                        "zip": {
                            "type": "string",
                            "permissions": {
                                "fields": true,
                                "conditions": true,
                                "sort": true,
                                "documents": {
                                    "insert": true,
                                    "update": true,
                                    "delete": true
                                }
                            },
                            "default": {
                                "fields": true
                            }
                        },
                        "map_img": {
                            "type": "string",
                            "permissions": {
                                "fields": true,
                                "conditions": true,
                                "documents": {
                                    "insert": true,
                                    "update": true,
                                    "delete": true
                                }
                            }
                        }
                    }
                },
                "phone": {
                    "type": "subdocument",
                    "title": {
                        "singular": "Phone",
                        "plural": "Phones"
                    },
                    "filter": {
                        "order": 5
                    },
                    "permissions": {
                        "documents": {
                            "delete": true
                        }
                    },
                    "subdocument": {
                        "country": {
                            "type": "id",
                            "reference": {
                                "type": "picklist",
                                "filter": {
                                    "function": "country",
                                    "options": []
                                }
                            },
                            "permissions": {
                                "fields": true,
                                "conditions": true,
                                "sort": true,
                                "documents": {
                                    "insert": true,
                                    "update": true,
                                    "delete": true
                                }
                            },
                            "default": {
                                "fields": true
                            }
                        },
                        "number": {
                            "type": "string",
                            "title": {
                                "singular": "Number",
                                "plural": "Numbers"
                            },
                            "permissions": {
                                "fields": true,
                                "conditions": true,
                                "sort": true,
                                "documents": {
                                    "insert": true,
                                    "update": true,
                                    "delete": true
                                }
                            },
                            "default": {
                                "fields": true
                            }
                        }
                    }
                },
                "fax": {
                    "type": "subdocument",
                    "title": {
                        "singular": "Fax",
                        "plural": "Faxes"
                    },
                    "filter": {
                        "order": 3
                    },
                    "permissions": {
                        "documents": {
                            "delete": true
                        }
                    },
                    "subdocument": {
                        "country": {
                            "type": "id",
                            "reference": {
                                "type": "picklist",
                                "filter": {
                                    "function": "country",
                                    "options": []
                                }
                            },
                            "permissions": {
                                "fields": true,
                                "conditions": true,
                                "sort": true,
                                "documents": {
                                    "insert": true,
                                    "update": true,
                                    "delete": true
                                }
                            },
                            "default": {
                                "fields": true
                            }
                        },
                        "number": {
                            "type": "string",
                            "title": {
                                "singular": "Number",
                                "plural": "Numbers"
                            },
                            "permissions": {
                                "fields": true,
                                "conditions": true,
                                "sort": true,
                                "documents": {
                                    "insert": true,
                                    "update": true,
                                    "delete": true
                                }
                            },
                            "default": {
                                "fields": true
                            }
                        }
                    }
                }
            },
            "documentation": {
                "description": "Location info, like address and geolocation",
                "color": "red",
                "hide": false
            }
        },
        "contact": {
            "type": "subdocument",
            "permissions": {
                "documents": {
                    "delete": true
                }
            },
            "filter": {
                "function": "client_contact",
                "options": {
                    "type": "full"
                }
            },
            "subdocument": {
                "gender": {
                    "type": "id",
                    "reference": {
                        "type": "picklist",
                        "filter": {
                            "function": "gender",
                            "options": []
                        }
                    },
                    "permissions": {
                        "fields": true,
                        "conditions": true,
                        "documents": {
                            "insert": true,
                            "update": true
                        },
                        "sort": true
                    },
                    "default": {
                        "fields": true
                    }
                },
                "name": {
                    "type": "subdocument",
                    "title": {
                        "singular": "Name"
                    },
                    "filter": {
                        "order": 5,
                        "function": "name",
                        "options": {
                            "type": "full"
                        }
                    },
                    "subdocument": {
                        "first": {
                            "type": "string",
                            "permissions": {
                                "fields": true,
                                "conditions": true,
                                "documents": {
                                    "insert": true,
                                    "update": true,
                                    "delete": true
                                },
                                "sort": true
                            },
                            "default": {
                                "fields": true
                            }
                        },
                        "last": {
                            "type": "string",
                            "permissions": {
                                "fields": true,
                                "conditions": true,
                                "documents": {
                                    "insert": true,
                                    "update": true,
                                    "delete": true
                                },
                                "sort": true
                            },
                            "default": {
                                "fields": true
                            }
                        },
                        "middle": {
                            "type": "string",
                            "permissions": {
                                "fields": true,
                                "conditions": true,
                                "sort": true,
                                "documents": {
                                    "insert": true,
                                    "update": true,
                                    "delete": true
                                }
                            },
                            "default": {
                                "fields": true
                            }
                        },
                        "nickname": {
                            "type": "string",
                            "permissions": {
                                "fields": true,
                                "conditions": true,
                                "sort": true,
                                "documents": {
                                    "insert": true,
                                    "update": true,
                                    "delete": true
                                }
                            },
                            "default": {
                                "fields": true
                            }
                        },
                        "title": {
                            "type": "id",
                            "permissions": {
                                "fields": true,
                                "conditions": true,
                                "sort": true,
                                "documents": {
                                    "insert": true,
                                    "update": true,
                                    "delete": true
                                }
                            },
                            "default": {
                                "fields": true
                            }
                        }
                    }
                },
                "phones": {
                    "type": "subdocuments",
                    "title": {
                        "singular": "Phone",
                        "plural": "Phones"
                    },
                    "filter": {
                        "order": 5
                    },
                    "permissions": {
                        "documents": {
                            "delete": true
                        }
                    },
                    "subdocument": {
                        "country": {
                            "type": "id",
                            "reference": {
                                "type": "picklist",
                                "filter": {
                                    "function": "country",
                                    "options": []
                                }
                            },
                            "permissions": {
                                "fields": true,
                                "conditions": true,
                                "sort": true,
                                "documents": {
                                    "insert": true,
                                    "update": true,
                                    "delete": true
                                }
                            },
                            "default": {
                                "fields": true
                            }
                        },
                        "number": {
                            "type": "string",
                            "title": {
                                "singular": "Number",
                                "plural": "Numbers"
                            },
                            "permissions": {
                                "fields": true,
                                "conditions": true,
                                "sort": true,
                                "documents": {
                                    "insert": true,
                                    "update": true,
                                    "delete": true
                                }
                            },
                            "default": {
                                "fields": true
                            }
                        },
                        "primary": {
                            "type": "boolean",
                            "permissions": {
                                "fields": true,
                                "conditions": true,
                                "sort": true,
                                "documents": {
                                    "insert": true,
                                    "update": true,
                                    "delete": true
                                }
                            },
                            "default": {
                                "fields": true
                            }
                        },
                        "type": {
                            "type": "id",
                            "reference": {
                                "type": "picklist",
                                "filter": {
                                    "function": "phone_type",
                                    "options": []
                                }
                            },
                            "permissions": {
                                "fields": true,
                                "conditions": true,
                                "sort": true,
                                "documents": {
                                    "insert": true,
                                    "update": true,
                                    "delete": true
                                }
                            },
                            "default": {
                                "fields": true
                            }
                        }
                    }
                }
            },
            "documentation": {
                "description": "Information on the client, like name, phones and gender",
                "color": "red",
                "hide": false
            }
        },
        "company": {
            "type": "subdocument",
            "permissions": {
                "documents": {
                    "delete": true
                }
            },
            "filter": {
                "function": "client_company",
                "options": {
                    "type": "full"
                }
            },
            "subdocument": {
                "website": {
                    "type": "string",
                    "permissions": {
                        "fields": true,
                        "conditions": true,
                        "sort": true,
                        "documents": {
                            "insert": true,
                            "update": true,
                            "delete": true
                        }
                    },
                    "default": {
                        "fields": true
                    }
                },
                "name": {
                    "type": "subdocument",
                    "filter": {
                        "function": "companyName",
                        "options": {
                            "type": "full"
                        }
                    },
                    "subdocument": {
                        "title": {
                            "type": "string",
                            "permissions": {
                                "fields": true,
                                "conditions": true,
                                "sort": true,
                                "documents": {
                                    "insert": true,
                                    "update": true,
                                    "delete": true
                                }
                            },
                            "default": {
                                "fields": true
                            }
                        }
                    }
                }
            },
            "documentation": {
                "description": "Company's name and website",
                "color": "red",
                "hide": false
            }
        },
        "employees": {
            "type": "subdocuments",
            "permissions": {
                "documents": {
                    "delete": true
                }
            },
            "subdocument": {
                "ext_id": {
                    "type": "string",
                    "permissions": {
                        "fields": true,
                        "conditions": true,
                        "sort": true,
                        "documents": {
                            "insert": true,
                            "update": true,
                            "delete": true
                        }
                    },
                    "default": {
                        "fields": true
                    }
                },
                "name": {
                    "type": "subdocument",
                    "filter": {
                        "function": "name",
                        "options": {
                            "type": "full"
                        }
                    },
                    "subdocument": {
                        "first": {
                            "type": "string",
                            "permissions": {
                                "fields": true,
                                "conditions": true,
                                "documents": {
                                    "insert": true,
                                    "update": true,
                                    "delete": true
                                },
                                "sort": true
                            },
                            "default": {
                                "fields": true
                            }
                        },
                        "last": {
                            "type": "string",
                            "permissions": {
                                "fields": true,
                                "conditions": true,
                                "documents": {
                                    "insert": true,
                                    "update": true,
                                    "delete": true
                                },
                                "sort": true
                            },
                            "default": {
                                "fields": true
                            }
                        },
                        "middle": {
                            "type": "string",
                            "permissions": {
                                "fields": true,
                                "conditions": true,
                                "sort": true,
                                "documents": {
                                    "insert": true,
                                    "update": true,
                                    "delete": true
                                }
                            },
                            "default": {
                                "fields": true
                            }
                        },
                        "nickname": {
                            "type": "string",
                            "permissions": {
                                "fields": true,
                                "conditions": true,
                                "sort": true,
                                "documents": {
                                    "insert": true,
                                    "update": true,
                                    "delete": true
                                }
                            },
                            "default": {
                                "fields": true
                            }
                        },
                        "title": {
                            "type": "id",
                            "permissions": {
                                "fields": true,
                                "conditions": true,
                                "sort": true,
                                "documents": {
                                    "insert": true,
                                    "update": true,
                                    "delete": true
                                }
                            },
                            "default": {
                                "fields": true
                            }
                        }
                    }
                },
                "office": {
                    "type": "id",
                    "reference": {
                        "type": "referenceOne",
                        "collection": "clients.locations"
                    },
                    "permissions": {
                        "fields": true,
                        "conditions": true,
                        "sort": true,
                        "documents": {
                            "insert": true,
                            "update": true,
                            "delete": true
                        }
                    },
                    "default": {
                        "fields": true
                    }
                },
                "phone": {
                    "type": "subdocument",
                    "permissions": {
                        "documents": {
                            "delete": true
                        }
                    },
                    "subdocument": {
                        "country": {
                            "type": "id",
                            "reference": {
                                "type": "picklist",
                                "filter": {
                                    "function": "country",
                                    "options": []
                                }
                            },
                            "permissions": {
                                "fields": true,
                                "conditions": true,
                                "sort": true,
                                "documents": {
                                    "insert": true,
                                    "update": true,
                                    "delete": true
                                }
                            },
                            "default": {
                                "fields": true
                            }
                        },
                        "number": {
                            "type": "string",
                            "title": {
                                "singular": "Number",
                                "plural": "Numbers"
                            },
                            "permissions": {
                                "fields": true,
                                "conditions": true,
                                "sort": true,
                                "documents": {
                                    "insert": true,
                                    "update": true,
                                    "delete": true
                                }
                            },
                            "default": {
                                "fields": true
                            }
                        }
                    }
                },
                "fax": {
                    "type": "subdocument",
                    "title": {
                        "singular": "Fax",
                        "plural": "Faxes"
                    },
                    "filter": {
                        "order": 3
                    },
                    "permissions": {
                        "documents": {
                            "delete": true
                        }
                    },
                    "subdocument": {
                        "country": {
                            "type": "id",
                            "reference": {
                                "type": "picklist",
                                "filter": {
                                    "function": "country",
                                    "options": []
                                }
                            },
                            "permissions": {
                                "fields": true,
                                "conditions": true,
                                "sort": true,
                                "documents": {
                                    "insert": true,
                                    "update": true,
                                    "delete": true
                                }
                            },
                            "default": {
                                "fields": true
                            }
                        },
                        "number": {
                            "type": "string",
                            "title": {
                                "singular": "Number",
                                "plural": "Numbers"
                            },
                            "permissions": {
                                "fields": true,
                                "conditions": true,
                                "sort": true,
                                "documents": {
                                    "insert": true,
                                    "update": true,
                                    "delete": true
                                }
                            },
                            "default": {
                                "fields": true
                            }
                        }
                    }
                },
                "email": {
                    "type": "string",
                    "permissions": {
                        "fields": true,
                        "conditions": true,
                        "sort": true,
                        "documents": {
                            "insert": true,
                            "update": true,
                            "delete": true
                        }
                    },
                    "default": {
                        "fields": true
                    }
                },
                "notes": {
                    "type": "string",
                    "permissions": {
                        "fields": true,
                        "conditions": true,
                        "sort": true,
                        "documents": {
                            "insert": true,
                            "update": true,
                            "delete": true
                        }
                    },
                    "default": {
                        "fields": true
                    }
                }
            },
            "documentation": {
                "description": "Contains information on the employees, like their names, offices, emails and others",
                "color": "red",
                "hide": false
            }
        }
    }
}